Start Program

# Test Path Parameters with working syntax

Write "Starting Path Parameters Test Server..."

# Create web server
Set server to create web server on port 8080

# Home page
Add route "/" with method "GET" to server:
    Write html response with "<html><head><title>Path Parameters Test</title></head><body><h1>Path Parameters Test</h1><p>Try these URLs:</p><ul><li><a href='/users/123'>GET /users/123</a></li><li><a href='/users/456'>GET /users/456</a></li><li><a href='/posts/2024/01/hello'>GET /posts/2024/01/hello</a></li></ul></body></html>"

# Route with path parameter :id
Add route "/users/:id" with method "GET" to server:
    Set user_id to get path parameter "id"
    Set response_data to make a dictionary with "message" set to "User endpoint", "id" set to user_id
    Write json response with response_data

# Route with multiple parameters
Add route "/posts/:year/:month/:slug" with method "GET" to server:
    Set year_value to get path parameter "year"
    Set month_value to get path parameter "month"
    Set slug_value to get path parameter "slug"
    Set response_data to make a dictionary with "message" set to "Post endpoint", "year" set to year_value, "month" set to month_value, "slug" set to slug_value
    Write json response with response_data

# Regular route (no parameters)
Add route "/api/test" with method "GET" to server:
    Set response_data to make a dictionary with "message" set to "Regular route works"
    Write json response with response_data

Write ""
Write "Server starting on http://localhost:8080"
Write "Test URLs:"
Write "  - http://localhost:8080/"
Write "  - http://localhost:8080/users/123"
Write "  - http://localhost:8080/users/456"  
Write "  - http://localhost:8080/posts/2024/01/hello-world"
Write "  - http://localhost:8080/api/test"
Write ""

Start server

End Program
